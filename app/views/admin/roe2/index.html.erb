<div class="flex items-center justify-between mb-6">
  <h1 class="text-2xl font-bold">ROE-2 YouTube Insights</h1>
  <%= link_to "New Insight", new_admin_roe2_path, class: "px-4 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-lg font-medium" %>
</div>

<% if flash[:success] %>
  <div class="mb-4 p-3 bg-green-600/20 border border-green-600 rounded-lg text-green-400">
    <%= flash[:success] %>
  </div>
<% end %>

<% if flash[:warning] %>
  <div class="mb-4 p-3 bg-yellow-600/20 border border-yellow-600 rounded-lg text-yellow-400">
    <%= flash[:warning] %>
  </div>
<% end %>

<% if flash[:error] %>
  <div class="mb-4 p-3 bg-red-600/20 border border-red-600 rounded-lg text-red-400">
    <%= flash[:error] %>
  </div>
<% end %>

<!-- 파이프라인 설명 -->
<div class="mb-6 p-4 bg-gray-800 rounded-xl border border-gray-700">
  <h2 class="font-semibold mb-2">ROE-2 Pipeline</h2>
  <div class="text-sm text-gray-400 space-y-1">
    <p>1. YouTube URL 입력 → 콘텐츠 자동 추출</p>
    <p>2. 인사이트 정리 (TacticalConcept / NarrativeContext)</p>
    <p>3. Neo4j 업로드 + Team/Player 연결</p>
  </div>
</div>

<!-- 최근 인사이트 -->
<div class="bg-gray-800 rounded-xl border border-gray-700 overflow-hidden">
  <div class="px-4 py-3 border-b border-gray-700">
    <h2 class="font-medium">Recent NarrativeContexts</h2>
  </div>

  <table class="w-full">
    <thead class="bg-gray-700/50">
      <tr>
        <th class="text-left px-4 py-3 text-sm font-medium text-gray-400">ID</th>
        <th class="text-left px-4 py-3 text-sm font-medium text-gray-400">Type</th>
        <th class="text-left px-4 py-3 text-sm font-medium text-gray-400">Team</th>
        <th class="text-left px-4 py-3 text-sm font-medium text-gray-400">Description</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray-700">
      <% @recent_narratives.each do |nc| %>
        <tr class="hover:bg-gray-700/30">
          <td class="px-4 py-3 font-mono text-xs text-gray-400"><%= nc["id"] %></td>
          <td class="px-4 py-3">
            <span class="px-2 py-1 bg-purple-600/30 text-purple-400 rounded text-xs"><%= nc["type"] %></span>
          </td>
          <td class="px-4 py-3">
            <span class="px-2 py-1 bg-indigo-600/30 text-indigo-400 rounded text-xs"><%= nc["team"] %></span>
          </td>
          <td class="px-4 py-3 text-sm text-gray-300 truncate max-w-md"><%= nc["description"]&.truncate(80) %></td>
        </tr>
      <% end %>
      <% if @recent_narratives.empty? %>
        <tr>
          <td colspan="4" class="px-4 py-8 text-center text-gray-500">No narratives yet. Create your first insight!</td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
